<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="all" href="../../css/common.css" th:href="@{/css/login.css}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <!-- <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css"> -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>My Login!</title>
    <style>

    </style>

</head>

<body>
<form th:action="@{/login}" method="post" class="myForm">
    <div class="container">
        <div class="row ">
            <div class="col-lg col-lg-7 p-0 m-0 vh-100">
                <div class="card card1">

                    <div class="row justify-content-center leftContent">
                        <!-- //my-auto -->
                        <div class="my-auto mx-md-5 px-md-5  position-relative leftContetpad">
                            <div class="row justify-content-center px-3 mb-3">
                                <!-- Logo -->
                                <img id="logo" src="/css/img/finaltestlogo.png"
                                     style="width: 75%;height:auto">
                            </div>
                            <div id="showInvalidMsg" th:if="${error}" class="alert alert-danger" role="alert">
                                <span>Login failed, Your username or password is incorrect</span>
                            </div>
                            <h3 class="mt-5 mb-0.5 text-left heading">Log In</h3>
                            <h5 style="color: white;" class="mb-3">Please enter username & password to continue</h5>
                            <!-- <h6 class="msg-info">Please login to your account</h6> -->

                            <div class="form-group usernameInputDiv">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                            <span>
                                                <button class="btn btn-outlined iconBtn">
                                                    <i class="fas fa-user myIcon"></i>
                                                </button>
                                            </span>
                                    </div>
                                    <div th:if="${message123456 != null}" class="alert alert-success" role="alert">
                                        <span th:text="${message123456}"></span>
                                    </div>
                                    <input name="username" id="username" placeholder="user name"
                                           class="form-control">

                                </div>
                                <small id="userNameCheck"></small>
                                <!-- <label class="form-control-label text-muted">Username</label> -->
                            </div>

                            <div class="form-group">
                                <!-- <label class="form-control-label text-muted">Password</label> -->
                                <div class="input-group">
                                    <div class="input-group-prepend" id="show_hide_password">
                                            <span>
                                                <button class="btn btn-outlined iconBtn" tabindex="-1">
                                                    <i class="fas fa-lock myIcon"></i>
                                                </button>
                                            </span>
                                    </div>
                                    <input name="password" id="password" type="password" placeholder="password"
                                           class="form-control">
                                    <span>
                                            <button class="btn btn-outlined eyeBtn">
                                                <i id="toggle" class="fa fa-eye-slash" aria-hidden="true"></i>
                                            </button>
                                        </span>
                                </div>
                                <small id="passCheck"></small>
                            </div>
                            <div class="content">
                                <div class="remember-me">
                                    <input type="checkbox" class="form-check-input mycheckbox " name="remember-me">
                                    <label class="form-check-label mx-4 rememberText"
                                           for="exampleCheck1">Remember Me</label>
                                </div>
                                <div class="forgot-password">
                                    <a href="" id="forgot-link" class="forgotPassword " aria-disabled="true">Forgot Password?</a>
                                </div>
                            </div>
<!--                            <div class="content">-->
<!--                            <div class="row justify-content-end my-2">-->
<!--                                &lt;!&ndash; <a th:href="@{/forgotpwd}" aria-disabled="true">-->
<!--                                    <p class="text-muted forgotPassword"><span style="color: #a09b9b;">-->
<!--                                        </span><span style="color: rgb(239, 235, 235);">Forgot Password?</span> </p>-->
<!--                                </a> &ndash;&gt;-->
<!--                                <a href="" id="forgot-link" class="forgotPassword " aria-disabled="true">Forgot-->
<!--                                    Password?</a>-->
<!--                            </div>-->
<!--                            <div class="form-group form-check" style="padding-left: 0.25rem;">-->
<!--                                <input type="checkbox" class="form-check-input mycheckbox " id="exampleCheck1">-->
<!--                                <label class="form-check-label mx-4"-->
<!--                                       style="color: white; font-size: large; font-weight: 500;"-->
<!--                                       for="exampleCheck1">Remember Me</label>-->
<!--                            </div>-->
<!--                            </div>-->
                            <div class="row justify-content-end">
                                <button id="loginBtn" class="btn-block btn-color">Log In</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md col-lg-5 p-0 m-0 myRight">
                <div class="card content">
                    <div class="card card2">
                    </div>
                    <div class="my-auto mx-md-5 px-md-5 right position-relative">
                        <h1 class="text-white welcome text-nowrap">WELCOME!</h1>
                        <div class="rightParagraphDiv ">
                            <p class="text-white rightParagraph text-nowrap">Login to continue</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<script>

        $(document).ready(function () {
            $(".forgotPassword").on("click", function (event) {
                console.log("clicked ");
                event.preventDefault();
                //if ($("#password").val() != "" && $("#userName").val() != "") {
                    window.location.href = "/forgotpwd"
                //}
            })

            $(".eyeBtn").click(function (event) {
                console.log("yes");
                event.preventDefault();
                if ($('#password').attr("type") == "text") {
                    console.log("text");
                    $('#password').attr('type', 'password');
                    $('#toggle').addClass("fa-eye-slash").removeClass("fa-eye");
//                    $('#password').removeClass("fa-eye");-->
                } else if ($('#password').attr("type") == "password") {
                    console.log("pass")
                    $('#password').attr('type', 'text');
                    $('#toggle').removeClass("fa-eye-slash").addClass("fa-eye");
//                   $('#password').addClass("fa-eye");-->
                }
            })


            $("#loginBtn").click(function (event) {
<!--                event.preventDefault();-->

                // validation for username and password

                 $("#userNameCheck").hide();
                 $("#passCheck").hide();
                  let usernameError = true;
                  let passwordError = true;
                  let usernameValue = $("#username").val();
                  let passwordValue = $("#password").val();
                  if (usernameValue.length == 0 && passwordValue.length == 0) {
                    $("#userNameCheck").show();
                    $("#passCheck").show();
                    $("#userNameCheck").html("Please enter username or email id");
                    $("#passCheck").html("Please enter password");
                    usernameError = false;
                    passwordError = false;
                    return false;
                  }else if (usernameValue.length == 0 ) {
                      $("#userNameCheck").show();
                      $("#userNameCheck").html("Please enter username or email id");
                      usernameError = false;
                      return false;
                    }else if(passwordValue.length == 0){
                        $("#passCheck").show();
                        $("#passCheck").html("Please enter password");
                        passwordError = false;
                        return false;
                    }
                    else {
                      $("#userNameCheck").hide();
                      $("#passCheck").hide();
<!--                      return true;-->
                    }

            });


            // Validate Username
                  $("#userNameCheck").hide();
                  let usernameError = true;
                  $("#username").keyup(function () {
                    let usernameValue = $("#username").val();
                    if (usernameValue.length == "") {
                      $("#userNameCheck").show();
                      $("#userNameCheck").html("Please enter username or email id.");
                      usernameError = false;
                      return false;
                    }else {
                      $("#userNameCheck").hide();
                    }
                  });


            // Validate Password

                $("#passCheck").hide();
                  let passwordError = true;
                  $("#password").keyup(function () {
                    let passwordValue = $("#password").val();
                    if (passwordValue.length == "") {
                      $("#passCheck").show();
                      $("#passCheck").html("Please enter password");
                      passwordError = false;
                      return false;
                    }else {
                      $("#passCheck").hide();
                    }
                  });


            $("#showInvalidMsg").show();
            setTimeout(function() { $("#showInvalidMsg").hide(); }, 4000);
        });
    </script>
</body>

</html>